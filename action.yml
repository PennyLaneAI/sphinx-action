name: 'Sphinx Build'
description: 'Builds documentation using Sphinx'
author: 'Ammar Askar'
branding:
  icon: 'book'
  color: 'yellow'
inputs:
  docs-folder:
    description:
      The folder containing your sphinx docs.
    required: true
    default: "docs/"
  build-command:
    description:
      The command used to build your documentation.
    required: false
    default: make html
  pre-build-command:
    description:
      Run before the build command, you can use this to install system level
      dependencies, for example with
      "apt-get update -y && apt-get install -y perl"
    required: false
  python-version:
    description:
      The version of Python to use.
    required: false
    default: "3.10"
runs:
  using: 'composite'
  steps:
    - name: Update Dockerfile with Python version
      shell: bash
      run: |
        sed -i "s/{INPUT_PYTHON_VERSION}/${{ inputs.python-version }}/g" Dockerfile
    - name: Build and run Docker container
      using: 'docker'
      image: 'Dockerfile'
  # using: 'docker'
  # image: 'Dockerfile'
  # args:
  #   - PYTHON_VERSION=${{ inputs.python-version }}
  # using: 'docker'
  # image: 'Dockerfile'
  # args:
  #   - ${{ inputs.python-version }}